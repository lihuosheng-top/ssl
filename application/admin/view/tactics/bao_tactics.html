{include file="template/_meta" /}
<title></title>
</head>

{block name="css"}
<link rel="stylesheet" type="text/css" href="__STATIC__/admin/common/css/aaa.css" />
<style type="text/css">
    body {
        background: #fff;
    }

    .ziji {
        width: auto;
    }

    .ziji>input {
        width: 150px;
    }

    .m_r {
        margin-right: 50px;
    }

    .m_t {
        margin-top: 50px;
    }

    .clone {
        display: flex;
        margin-top: 15px;
    }

    .percent {
        font-size: 23px;
        font-weight: 800;
    }

    .one_more {
        padding: 0;
        width: 500px;
        text-align: center;
        line-height: 30px;
        color: rgb(14, 144, 210);
        border: 1px solid rgb(14, 144, 210);
        margin-top: 20px;
        margin-left: 360px;
    }

    .img_x {
        width: 20px;
        height: 20px;
    }

    .layui-btn {
        border-radius: 6px;
        height: 50px;
    }

    .layui-form-lists .layui-btn {
        width: 170px;
    }

    .layui-btn-normal {
        margin-right: 150px;
    }

    .layui-form-item {
        margin-left: 250px;
        margin-top: 80px;
    }

    .del_div {
        display: inline;
    }

    .one_more:hover {
        cursor: pointer;
    }

    .del_div:hover {
        cursor: pointer;
    }

    .layui-form-checkbox {
        margin-top: 5px;
    }
</style>

{/block}

<body>
    {block name="content"}
    <div id="app">
        <form class="layui-form layui-form-lists" action="{:url()}" method="post" enctype="multipart/form-data">
            <blockquote class="layui-elem-quote news_search">
                <div class="seach_laber">
                    红包策略
                </div>
            </blockquote>
            <div class="oneself m_t">
                <div class="form-item" style="margin-top: 15px;">
                    <label class="form-label" style="width:20%">自己甩奖励金额和概率</label>
                    <div class="form-input ziji">
                        <input type="checkbox" name="oneself_0[status]" lay-filter="choose1" value="1" checked=''>
                    </div>
                    <div class="form-input ziji m_r">
                        <input type="text" name="one_0[percent]" lay-verify="title" autocomplete="off"
                            placeholder="  请输入金额" class="layui-input">
                        <span class="percent">%</span>
                        <div class="tips">
                            <span class="red">*</span>奖励金额
                        </div>
                    </div>
                    <div class="form-input ziji">
                        <input type="text" name="one_0[probability]" lay-verify="title" autocomplete="off"
                            placeholder="  请输入数字" class="layui-input">
                        <div class="tips">
                            <span class="red">*</span>输入数字后计算出出现的概率；0 ~ 99999,概率=此处数字÷所有添加档数字之和
                        </div>
                    </div>

                </div>
            </div>
            <div class="one_more" @click="add_oneself">添加一档</div>

            <div class="help m_t">
                <div class="form-item" style="margin-top:15px;">
                    <label class="form-label" style="width:20%">帮别人甩奖励金额和概率</label>
                    <div class="form-input ziji">
                        <input type="checkbox" name="help_0[status]" lay-filter="choose1" value="1" checked=''>
                    </div>
                    <div class="form-input ziji m_r">
                        <input type="text" name="work_0[percent]" lay-verify="title" autocomplete="off"
                            placeholder="  请输入金额" class="layui-input">
                        <span class="percent">%</span>
                        <div class="tips">
                            <span class="red">*</span>奖励金额
                        </div>
                    </div>
                    <div class="form-input ziji">
                        <input type="text" name="work_0[probability]" lay-verify="title" autocomplete="off"
                            placeholder="  请输入数字" class="layui-input">
                        <div class="tips">
                            <span class="red">*</span>输入数字后计算出出现的概率；0 ~ 99999,概率=此处数字÷所有添加档数字之和
                        </div>
                    </div>
                </div>
            </div>
            <div class="one_more" @click="add_help">添加一档</div>

            <div class="layui-form-item" style="width:100%;">
                <div class="layui-input-block">
                    <button class="layui-btn layui-btn-normal" type="submit" id="submit">保存</button>
                    <button type="button" class="layui-btn layui-btn-primary"
                        onClick="javascript :history.back(-1);">返回</button>
                </div>

            </div>
        </form>
    </div>
    {/block}
    <!--_footer 作为公共模版分离出去-->
    {include file="template/_footer" /}
    <!--/_footer 作为公共模版分离出去-->

    <!--请在下方写此页面业务相关的脚本-->
    {block name="bottom"}
    <script src="__STATIC__/admin/common/js/vue.js"></script>
    <script type="text/javascript">
        layui.config({
            base: "js/"
        }).use(['form', 'layer', 'jquery', 'laypage'], () => {
            var form = layui.form(),
                layer = parent.layer === undefined ? layui.layer : parent.layer,
                laypage = layui.laypage,
                $ = layui.jquery;


            form.on("checkbox(choose1)", function (data) {

                if (data.value == "1") {
                    $(this).val('0');
                    data.value = "0";
                } else {
                    $(this).val('1');
                    data.value = "1";
                }
                form.render('checkbox');
            })
            let i = 0, u = 0;

            $('#one_more').on('click', function () {
                let dhtml = "";
                i = i + 1;
                dhtml = `<div class="form-item clone">
                                        <label class="form-label" style="width:20%"></label>
                                        <div class="form-input ziji">
                                                <input type="checkbox" name="oneself_${i}[percent]" value="0" lay-filter="choose1">
                                        </div>
                                        <div class="form-input ziji m_r">
                                            <input type="text" name="one_${i}[percent]" lay-verify="title" autocomplete="off" placeholder="  请输入金额"
                                                class="layui-input">
                                            <span class="percent">%</span>
                                            <div class="tips">
                                                <span class="red">*</span>奖励金额
                                            </div>
                                        </div>
                                        <div class="form-input ziji">
                                            <input type="text" name="one_${i}[probability]" lay-verify="title" autocomplete="off" placeholder="  请输入数字"
                                                class="layui-input" style="margin-right: 110px;">
                                            <div class="del_div" id="del_oneself"><img src="__STATIC__/admin/index/img/u1306.png" class="img_x"></div>
                                            <div class="tips">
                                                <span class="red">*</span>输入数字后计算出出现的概率；0 ~ 99999,概率=此处数字÷所有添加档数字之和
                                            </div>
                                        </div>
                                    </div>`;
                $('.oneself').append(dhtml);
                $(document).on('click', '#del_oneself', function () {
                    $(this).parents('.clone').remove();
                });
                form.render();
            });


            $('#one_help').on('click', function () {
                let dhtml = "";
                u = u + 1;
                dhtml = `<div class="form-item clone">
                                    <label class="form-label" style="width:20%"></label>
                                    <div class="form-input ziji">
                                        <input type="checkbox" name="help_${u}[percent]" value="0" lay-filter="choose1">
                                    </div>
                                    <div class="form-input ziji m_r">
                                        <input type="text" name="work_${u}[percent]" lay-verify="title" autocomplete="off" placeholder="  请输入金额"
                                            class="layui-input">
                                        <span class="percent">%</span>
                                        <div class="tips">
                                            <span class="red">*</span>奖励金额
                                        </div>
                                    </div>
                                    <div class="form-input ziji">
                                        <input type="text" name="work_${u}[probability]" lay-verify="title" autocomplete="off" placeholder="  请输入数字"
                                            class="layui-input"  style="margin-right: 110px;">
                                        <div class="del_div" id="del_help"><img src="__STATIC__/admin/index/img/u1306.png" class="img_x"></div>
                                        <div class="tips">
                                            <span class="red">*</span>输入数字后计算出出现的概率；0 ~ 99999,概率=此处数字÷所有添加档数字之和
                                        </div>
                                    </div>
                                    </div>`;
                $('.help').append(dhtml);
                $(document).on('click', '#del_help', function () {
                    $(this).parents('.clone').remove();
                });
                form.render();
            });


        })


    </script>

    {/block}

</body>

</html>